<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>
        Sending JSON data to server
    </title>
    <script type="text/javascript" src="scripts.js"></script>

    <style>
        iframe, div{
            border: solid green 1px;
            margin: 5px;
        }
    </style>
</head>
<body style="text-align:center" id="body" onload="loadpages()">
    <div style="float:left; width: 45%" id="getallstudent"></div>
    <div style="float:right; width: 45%" id="getallcourse"></div>
    <!--iframe style="float:left" width="45%" frameborder="1" scrolling="no" onload="resizeIframe(this)" id="getallstudent" src="http://localhost:8090/getAllStudent"></iframe-->
    <!--iframe style="float:right" width="45%" frameborder="1" scrolling="no" onload="resizeIframe(this)" id="getallcourse" src="http://localhost:8090/getAllCourse"></iframe-->

    <div style="float:left; width: 99%">
    <div style="float:left; width: 45%">
        <h4 style="color:green;">Add student</h4>
        E-mail:<input type="email" id="email" name="email" placeholder="E-mail" value="proba@email.hu">
        Jelszó:<input type="password" id="password" name="password" placeholder="Password" value="jelszo">
        <button onclick="sendJSON()">Add Student</button>
        <p class="result" style=""></p>
    </div>
    <div style="float:right; width: 45%">
        <h4 style="color:green; width:45%">Add course</h4>
        Kurzus név:<input type="text" id="coursename" name="coursename" placeholder="Course name" value="IT kurzus">
        <button onclick="addCOURSE()">Add course</button>
        <p class="result1" ></p>
    </div>
    </div>
    <div style="float:left; width: 99%">
        <!--Add CourseRegistration-->
        <h4 style="color:green;">Kurzus tanulóhoz rendelése</h4>
        Tanuló id:<input type="number" id="student_id" name="student_id" placeholder="student id" value="1">
        Kurzus id:<input type="number" id="course_id" name="course_id" placeholder="course id" value="1">
        <input type="hidden" id="power" name="power" placeholder="jegy" value="0" readonly>
        <button onclick="sendCOURSEREG()">Add Course to the Student</button>
        <p class="result2" ></p>
    </div>
    <!--iframe style="float:left; width: 99%" frameborder="1" scrolling="no" onload="resizeIframe(this)" id="getallcourseregistrations" src="http://localhost:8090/getAllCourseRegistration"></iframe-->
    <div style="float:left; width: 98%" id="getallcourseregistrations"></div>



    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        function sendJsonToDeleteCourseReg(id){
            // Creating a XHR object
            let xhr = new XMLHttpRequest();
            let url = "http://localhost:8090/deleteCourseRegistration";

            // open a connection
            xhr.open("POST", url, true);

            // Set the request header i.e. which type of content you are sending
            xhr.setRequestHeader("Content-Type", "application/json");

            // Create a state change callback
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    // Print received data from server
                   $("#getallcourseregistrations").load("http://localhost:8090/getAllCourseRegistration");
                }
            };

            // Converting JSON data to string
            let data = JSON.stringify({ "courseregistration_id": id});
            // Sending data with the request
            xhr.send(data);
        }
    </script>





</body>
</html>